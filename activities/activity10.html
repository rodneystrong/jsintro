<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Javascript - Activity 9</title>
  <meta name="description" content="Activity 9">
  <meta name="author" content="Bitwise">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/cards.css">

  <script src="./js/underscore.js" type="text/javascript"></script>
  <script src="./js/jquery.js" type="text/javascript"></script>
  <script src="./js/deck.js" type="text/javascript"></script>
  <script src="./js/card.js" type="text/javascript"></script>
  <script type="text/javascript">

    var deck = new Deck();
    deck.generate();
    deck.shuffle();

    var hand = new Deck();

    function createCardElement(card) {
      return $('<li>')
        .data('card',card)
        .addClass(card.getClassName());
    }
    
    $(function(){

      $('#deal-card').on('click',function(e){
        var c = deck.dealCard();
        var $li = createCardElement(c);

        $('#myhand').append($li);        
        hand.addCard(c);
      });

      $('#myhand').on('click', '.card', function(e){
        $(e.target).remove();
        //alert($target.data('card'));
      });

    });

  </script>

</head>
<body>

	<h1>Deal a Hand of Cards</h1>

  <button id="deal-card">Deal Card</button>

  <ul class="cardtray">
    <li class="card red" id="dealer"></li>
    <li class="card placeholder" id="pile"></li>
  </ul>

  <ul class="cardtray" id="myhand">
  </ul>

  <hr />
  <a href="https://github.com/tapmodo/jsintro/wiki/jQuery-Activities#wiki-day-9">See Wiki for Activities</a>

  <script id="card-tmpl" type="text/template">
    <ul class="cardtray">
      <% for(var i=0,l=cards.length; i<l; i++) { %>
      <li class="<%= cards[i].getClassName() %>"></li>
      <% } %>
    </ul>
  </script>

</body>
</html>
