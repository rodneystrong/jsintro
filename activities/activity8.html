<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Javascript - Activity 8</title>
  <meta name="description" content="Activity 8">
  <meta name="author" content="Bitwise">
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/cards.css">

  <script src="./js/underscore.js" type="text/javascript"></script>
  <script src="./js/jquery.js" type="text/javascript"></script>
  <script src="./js/deck.js" type="text/javascript"></script>
  <script src="./js/card.js" type="text/javascript"></script>
  <script type="text/javascript">

    var deck = new Deck();
    deck.generate();
    deck.shuffle();

    // Button Handler - takes card off the front of the deck
    function alertCard(){
      // get a Card object off the top of the deck
      var c = deck.dealCard();

      // use Card properties to generate CSS class
      var str = 'card ' + c.suit.toLowerCase() +
        ' card' + c.rank.toString().toLowerCase();

      // select on-screen DOM element and assign the class
      var el = document.getElementById('dealer');
      el.className = str;
    }

  </script>

</head>

<body>

	<h1>Deal a Hand of Cards</h1>

  <button onclick="alertCard();" id="deal-card">Deal Card</button>

  <ul class="cardtray">
    <li class="card red" id="dealer"></li>
    <li class="card placeholder" id="pile"></li>
  </ul>

  <ul class="cardtray" id="myhand">
  </ul>

  <hr />
  <div class="instructions">
    <h3>Activity 8a - deal card into hand</h3>
    <ol>
      <li>We will be updating the button handler to deal a card from the deck</li>
      <li>Write a function <code>createCardElement(card)</code> that returns created element</li>
      <li>Using that function, update button handler to append element to "myhand" list</li>
    </ol>

    <h3>Activity 8b - attach button event from Javascript</h3>
    <ol>
      <li>Remove onclick="" attribute from HTML</li>
      <li>Create a function named <code>bindElements()</code></li>
      <li>Add an <code>onload="bindElements();"</code> to body element</li>
      <li>Inside this function, use <code>.addEventListener(evtype,callback)</code> method to add event handler</li>
    </ol>

    <h3>Activity 8c - add event listener to list container</h3>
    <ol>
      <li>Store card instance onto created DOM element</li>
      <li>Update event handler to alert card "name" (using card's <code>.toString()</code> method)</li>
    </ol>

    <h3>Activity 8d - status display</h3>
    <ol>
      <li>Add an element to your page for status display</li>
      <li>Using <code>.innerHTML</code>, update status display with card name when clicked.</li>
    </ol>

    <h3>Activity 8e - removing cards</h3>
    <ol>
      <li>Remove a card from the players hand when clicked</li>
      <li><b>Bonus:</b> instead of removing, add the card to <code>id="pile"</code></li>
    </ol>

    <h4>If we (or you) get here, try this additional modification:</h4>
    <ol>
      <li>Add an <code>&lt;input type="checkbox"&gt;</code> element to the page</li>
      <li>Write a function that returns the value of the input's <code>.checked</code> property</li>
      <li>Use the function in a conditional statement to remove the card if checked</li>
      <li>If unchecked, alert with the card name</li>
    </ol>

  <script id="card-tmpl" type="text/template">
    <ul class="cardtray">
      <% for(var i=0,l=cards.length; i<l; i++) { %>
      <li class="<%= cards[i].getClassName() %>"></li>
      <% } %>
    </ul>
  </script>

</body>
</html>
